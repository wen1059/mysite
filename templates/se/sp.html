<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>

    <link href="https://unpkg.com/tabulator-tables@6.3.1/dist/css/tabulator_simple.min.css" rel="stylesheet">
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables@6.3.1/dist/js/tabulator.min.js"></script>
</head>
<body>
<div id="data-table"></div>

<script>
    // ============== é…ç½®åŒºï¼ˆåªéœ€ä¿®æ”¹è¿™é‡Œï¼‰==============

    // 1. ä½ çš„APIåœ°å€
    const API_URL = 'http://10.1.224.117/se/sp/api/';

    // 2. è¡¨æ ¼åŸºç¡€é…ç½®ï¼ˆæŒ‰éœ€ä¿®æ”¹ï¼‰
    const tableConfig = {
        autoColumns: true,       // âœ… è‡ªåŠ¨ä»JSONç”Ÿæˆåˆ—
        {#layout: "fitColumns",    // âœ… è‡ªé€‚åº”å®½åº¦#}
        height: "900px",         // âœ… å›ºå®šé«˜åº¦
        pagination: "local",     // âœ… åˆ†é¡µ
        paginationSize: 5000,      // âœ… æ¯é¡µ15æ¡
        paginationSizeSelector: [25, 5000],  // âœ… åˆ†é¡µå¤§å°é€‰é¡¹
        frozenRows:0, //å†»ç»“è¡Œ

        // åŸæœ‰å±…ä¸­è®¾ç½®
        columnDefaults: {
            headerHozAlign: "center",
            hozAlign: "center",
            vertAlign: "middle",

            // ğŸ”¥ å¢åŠ è¿™3è¡Œå¯ç”¨ç­›é€‰
            headerFilter: true,                    // å¯ç”¨ç­›é€‰
            headerFilterPlaceholder: "ç­›é€‰...",    // ç­›é€‰æ¡†æç¤º
            headerFilterFunc: "like"               // æ¨¡ç³ŠåŒ¹é…
        }
    };

    // ============== ä»¥ä¸‹æ˜¯æ ¸å¿ƒä»£ç ï¼ˆä¸ç”¨æ”¹ï¼‰==============

    // åˆ›å»ºè¡¨æ ¼
    const table = new Tabulator("#data-table", tableConfig);

    // åŠ è½½æ•°æ®
    async function loadData() {
        try {
            const response = await fetch(API_URL);
            const data = await response.json();
            table.setData(data);
        } catch (error) {
            console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
            // æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
            table.setData([{é”™è¯¯: "æ— æ³•åŠ è½½æ•°æ®"}]);
        }
    }

    // é¡µé¢åŠ è½½æ—¶è·å–æ•°æ®
    window.onload = loadData;
</script>
</body>
</html>
